# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!
#
# Comments start with a # and can only be used at the beginning of a line.
#
###############################################################################
#
#
set $mod Mod4

# mouse settings
focus_follows_mouse yes

# set the right default sink before we launch i3status
exec --no-startup-id  paudioctl sink

# Detect & set display
exec --no-startup-id  xdisp
#

###############################################################################
#
## Key command assignments
#
# xmodmap -pke

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Enter resize mode
bindsym $mod+Control+r mode "resize"

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# start a floating terminal
bindsym $mod+Control+Return exec gnome-terminal

# kill focused window
bindsym $mod+x kill

# detect/set display
bindsym XF86Display exec --no-startup-id xdisp
bindsym $mod+Scroll_Lock exec --no-startup-id xdisp
bindsym $mod+Shift+Scroll_Lock exec --no-startup-id xdisp laptop

#
## Navigation
#
# change focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# with tab key
bindsym $mod+Tab focus right
bindsym $mod+Shift+Tab focus left
bindsym $mod+Control+Tab focus down
bindsym $mod+Control+Shift+Tab focus up

# move focused window
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move urp
bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle between stacking/tabbed/split:
#bindsym $mod+z layout toggle
# Toggle between stacking/tabbed/splith/splitv:
#bindsym $mod+w layout toggle all

# Show border or not
bindsym $mod+b border toggle

# toggle tiling / floating
#bindsym $mod+Control+space floating toggle
bindsym $mod+t floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+Prior focus parent

# focus the child container
bindsym $mod+Next focus child

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# start dmenu (a program launcher)
bindsym $mod+r exec dmenu_run -i -p "Command:" -nb "$border_unfocused" -nf "$text_unfocused" -sb "$border_focused" -sf "$text_focused" -fn "-urw-*-*-r-*-*-*-100-*-*-*-*-*-*"

# switch to the next and previous workspace
bindsym $mod+Control+Left workspace prev
bindsym $mod+Control+Right workspace next

# Move the current workspace to the next output
# (effectively toggles when you only have two outputs)
bindsym $mod+Control+Prior move workspace to output left
bindsym $mod+Control+Next move workspace to output right

# Make the currently focused window a scratchpad
#bindsym $mod+KP_Subtract move scratchpad
# Show the first scratchpad window
#bindsym $mod+KP_Add scratchpad show

#
## launch applications
#

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# Lock Screen / Suspend / Poweroff
bindsym Pause exec lock
bindsym $mod+Pause exec lock suspend
bindsym $mod+Shift+Control+Pause exec sudo /sbin/poweroff

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# start some tools
bindsym $mod+i exec ircwindow
bindsym $mod+c exec gnome-calculator
bindsym $mod+d exec nautilus
bindsym $mod+Control+c exec terminsator -e 'less /usr/share/X11/locale/en_US.UTF-8/Compose'

# Screenshot
bindsym Print exec screengrab

#
# volume and media controls
#

bindsym XF86AudioLowerVolume        exec --no-startup-id  paudioctl min
bindsym XF86AudioRaiseVolume        exec --no-startup-id  paudioctl plus
bindsym XF86AudioMute               exec --no-startup-id  paudioctl toggle

bindsym $mod+XF86AudioLowerVolume   exec --no-startup-id  mediaplayer_cmd prev
bindsym $mod+XF86AudioMute          exec --no-startup-id  mediaplayer_cmd play
bindsym $mod+XF86AudioRaiseVolume   exec --no-startup-id  mediaplayer_cmd next

bindsym XF86AudioPrev               exec --no-startup-id  mediaplayer_cmd prev
bindsym XF86AudioPlay               exec --no-startup-id  mediaplayer_cmd play
bindsym XF86AudioNext               exec --no-startup-id  mediaplayer_cmd next

bindsym XF86Tools                   exec --no-startup-id  mediaplayer_cmd next

#bindsym XF86MonBrightnessUp exec --no-startup-id /usr/bin/xbacklight -inc 5
#bindsym XF86MonBrightnessDown exec --no-startup-id /usr/bin/xbacklight -dec 5

###############################################################################
#
## Colors, borders, layout, fonts
#

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below. ISO 10646 = Unicode
#font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, if you need a lot of unicode glyphs or
# right-to-left text rendering, you should instead use pango for rendering and
# chose a FreeType font, such as:
#font pango:DejaVu Sans Mono 10
font pango:Ubuntu Mono 10

#
# Client Container Colors
#
# color defines

set $background #353535
set $indicator  #0080FF

# A client which is not the focused one of its container.
set $border_unfocused   #585858
set $text_unfocused     #BDBDBD

# A client currently focused in its container, but does not have focus now.
set $border_inactive    #225588
set $text_inactive      #BDBDBD

# A client which currently has the focus.
set $border_focused     #0080FF
set $text_focused       #FFFFFF

# A client which has its urgency hint activated.
set $border_urgent      #FF0000
set $text_urgent        #FFFFFF

## client windows       border              background          text
client.unfocused        $border_unfocused   $border_unfocused   $text_unfocused
client.focused_inactive $border_inactive    $border_inactive    $text_inactive
client.focused          $border_focused     $border_focused     $text_focused
client.urgent           $border_urgent      $border_urgent      $text_urgent
#client.placeholder      $border_unfocused   $border_unfocused   $text_unfocused

#
# status bar
#
bar {
        id main
        status_command i3status

        # tray_output <none|primary|output>
        tray_output primary

        # position <top|bottom>
        position top

        # mode <dock|hide|invisible>
        mode dock
        # hidden_state <hide|show>
        hidden_state hide
        # modifier <Modifier>
        modifier $mod

        # font <font>
        #font pango:DejaVu Sans Mono 10
        font pango:Ubuntu Mono 10

        # workspace_buttons <yes|no>
        workspace_buttons yes

        # binding_mode_indicator <yes|no>
        # Specifies whether the current binding mode indicator should be shown
        # or not. This is useful if you want to hide the workspace buttons but
        # still be able to see the current binding mode indicator.
        #binding_mode_indicator yes

        colors {

            # Text color to be used for the separator.
            separator           $border_inactive

            # Background color of the bar.
            background          $background

            # Text color to be used for the statusline.
            statusline          $text_inactive

            # workspace button when the workspace does not have focus and is not
            # active (visible) on any output. This will be the case for most workspaces.
            inactive_workspace  $border_unfocused $background $text_unfocused $indicator

            # Border, background and text color for a workspace button when the workspace is active (visible) on some output, but the focus is on
            # another one. You can only tell this apart from the focused workspace when you are using multiple monitors.
            active_workspace    $border_inactive  $background $text_inactive  $indicator

            # color for a workspace button when the workspace has focus.
            focused_workspace   $border_focused   $background $text_focused   $indicator

            # Border, background and text color for a workspace button when the workspace window with the urgency hint set.
            urgent_workspace    $border_urgent    $background $text_urgent    $indicator

        }
}

###############################################################################
#
## workspace and window properties
#

# <default|stacking|tabbed>
workspace_layout default

# split orientation <horizontal|vertical|auto>
default_orientation auto

# popup_during_fullscreen <smart|ignore|leave_fullscreen>
popup_during_fullscreen smart

# force_focus_wrapping <yes|no>
force_focus_wrapping no

# This configuration directive enables automatic workspace back_and_forth when
# switching to the workspace that is currently focused.
workspace_auto_back_and_forth no

# If an application on another workspace sets an urgency hint, switching to
# this workspace may lead to immediate focus of the application, which also
# means the window decoration color would be immediately resetted to
# client.focused. This may make it unnecessarily hard to tell which window
# originally raised the event. In order to prevent this, you can tell i3 to
# delay resetting the urgency state by a certain time using the
# force_display_urgency_hint directive.
# Setting the value to 0 disables this feature. The default is 500ms.
force_display_urgency_hint 1000 ms

# <none|vertical|horizontal|both> :
hide_edge_borders none


###############################################################################
#
## Window assignments & rules
#
# Assignments are processed by i3 in the order in which they appear in the
# config file. The first one which matches the window wins and later
# assignments are not considered.
# Maar volgens mij is het omgekeerd.

# terminals
for_window [class="(X-terminal-emulator|Terminator)"]   border pixel 1
for_window [class="Terminator" instance="terminator" title="Terminator Preferences"] floating enable
for_window [class="Gnome-terminal"]                     floating enable, border pixel 1

# Tools
for_window [class="SpiderOak"]                          floating enable
for_window [class="Gcalctool"]                          floating enable
for_window [class="SparkleShare"]                       floating enable
for_window [class="Dropbox" instance="dropbox" title="Dropbox Preferences"] floating enable
for_window [class="Nautilus" instance="file_progress"]  floating enable, border pixel 2
for_window [class="(Totem|Vlc)" instance="(totem|vlc)"] floating enable, border none
for_window [window_role="SSHASKPASS"]   floating enable, border pixel 10
for_window [class="Gnome-control-center" instance="gnome-control-center"] floating enable
for_window [class="Seafile-applet" instance="seafile-applet" title="Seafile"] floating enable

# Teamviewer
assign [class="Wine" instance="TeamViewer.exe"]  → "8"
for_window [class="Wine" instance="TeamViewer.exe"]     floating enable
#for_window [class="Wine" instance="TeamViewer.exe" title="!(Computers & Contacts|TeamViewer)"] layout tiled

# Remote Desktop Client
#for_window [class="Remmina" instance="remmina" title="Remmina Remote Desktop Client"] floating enable
for_window [class="Remmina" instance="remmina"] layout tabbed
#for_window [class="Remmina" id=65011715 instance="remmina" title="Remmina Remote Desktop Client"] layout tiled
assign [class="Remmina" instance="remmina"] → "8"

# Wireshark
assign [class="Wireshark" instance="wireshark"] → "7"

# Browsers
assign      [class="(Google-chrome|Chromium-browser|Firefox)" instance="(google-chrome|Chromium-browser|Navigator)" window_role="browser"]  →   "1"
for_window  [class="(Google-chrome|Chromium-browser|Firefox)" instance="(google-chrome|Chromium-browser|Navigator)" window_role="browser"] layout tabbed
for_window  [class="(Google-chrome|Chromium-browser|Firefox)" window_role="(Preferences|pop-up|setup|About)" ] floating enable


# Messaging
assign [window_role="irc"]                          →   "2"
assign [class="Pidgin"]                             →   "2"
for_window [class="Pidgin" instance="Pidgin" window_role="(buddy_list|conversation)"]  split vertical

# Virtualbox
assign [class="VirtualBox"] →   "6"
for_window [class="VirtualBox"] layout tabbed

# Various
assign [class="jetbrains-idea"]                     →   "5"
assign [class="Update-manager|Update-notifier"]     →   "9"
assign [class="Gnome-control-center" window_role="!(^browser$|^GtkFileChooserDialog$)"] → "9"

# KeePass
for_window [title="(KeePass|KeePass2|Open Database File|Select key file manually|Plugins|Edit Group)"]      floating enable
for_window [class="KeePass2" instance="keepass2"] floating enable
assign [class="KeePass2" instance="keepass2"]                   → "9"
assign [title="(KeePass|KeePass2|Open Database File|Select key file manually)"]          → "9"

# Music
assign     [class="(Spotify|nuvolaplayer|rhythmbox|Tomahawk)"]  →   "10"
for_window [class="(Spotify|nuvolaplayer|rhythmbox|Tomahawk)"]      layout tabbed


###############################################################################
#
## Client default rules, seems to be put after the assignments & rules
#

# new window default border <normal|1pixel|none|pixel> :
new_window  pixel 2
new_float   pixel 1

###############################################################################
#
## startup
#
# & send process to background avoids keeping the calling sh shells in memory

# Background stuff
exec --no-startup-id "unagi &"
exec --no-startup-id "launch-screen dunst -print"
exec --no-startup-id "setbg redisplay"
exec --no-startup-id "autocutsel -selection CLIPBOARD &"
exec --no-startup-id "numlockx on"
exec --no-startup-id "which setbg-loop && setbg-loop"

# Desktop Apps
exec "nm-applet &"
exec "gnome-sound-applet &"
exec "xfce4-power-manager &"
exec "dropbox start"
exec "seafile-applet &"
exec "spotify &"
exec "browse-persona &"

#exec "transmission-gtk --minimized &"

## exec_always

# start with interactive bash shell as this needs ssh keys to be unlocked
exec sleep 5; gnome-terminal --role=SSHASKPASS --geometry 50x2 -e "/bin/bash -i -c 'sparkleshare  start; ircwindow'"

# set keyboard
# http://blog.ssokolow.com/archives/2011/12/24/getting-your-way-with-setxkbmap/
exec_always setxkbmap -layout us -variant euro -model pc105 -option -option compose:caps -option lv3:ralt_switch -option terminate:ctrl_alt_bkspc -option eurosign:e -option nbsp:level3n

# Configure Vertical Mouse
exec_always vertical-mouse-settings

