#!/bin/bash

args="$*"

execute_commands()
{
        echo
        export IFS=";"
        for command in ${args}
	    do
            echo \$ $command
            echo
            eval $command
            echo
        done
}

if [ -z "${args}" ]
then
	/usr/bin/pastebinit

elif [ "$(basename $0)" = "execho" ]
then
        execute_commands

else
    output=`execute_commands 2>&1`
    echo -e "$output"
    echo
    link=`echo "$output" | /usr/bin/pastebinit`
    sleep 1
    echo $link
    echo $link | tr -d '\n' | xclip -in -selection clipboard
    notify-send --category=transfer.complete \
                --urgency=low --icon=gtk-info \
                "Command pasted" "url copied to clipboard"
fi

