#!/bin/bash

acdgitusers.sh serge | grep -q "Serge van Ginderachter <serge@milieuinfo.be>"
if test ! $? -eq 0
then
    echo Error contacting ldap
    exit 1
fi

git config --get svn.authorsprog | grep -q "acdgitusers.sh"
if test ! $? -eq 0
then
    echo Error, not the acd git repo.
    exit 1
fi

git svn rebase
if test ! $? -eq 0
then
    echo Error at svn rebase
    exit 1
fi

git svn dcommit
if test ! $? -eq 0
then
    echo Error at svn dcommit
    exit 1
fi

git push serge trunk:trunk
if test ! $? -eq 0
then
    echo Error at push to git serge
    exit 1
fi

