#!/bin/bash -x

sleep 1
imagefile="$HOME/Downloads/$(date +%Y%m%d%H%M%S).png"

case $1 in
    full)
        options="--multidisp"
        ;;
    screen)
        options=""
        ;;
    window)
        options="--focused"
        ;;
    select|*)
        options="--select"
        ;;
esac

echo /usr/bin/scrot --silent $options ${imagefile}
if /usr/bin/scrot --silent $options ${imagefile}
then
    notify-send --category=transfer.complete \
        --urgency=low --icon=gtk-info \
        "Screen grabbed" "saved to ${imagefile}"
    echo -n ${imagefile} | xclip -in -selection clipboard
else
    notify-send --category=transfer.error \
        --urgency=critical --icon=gtk-info \
        "Screen grab  error" "tried saving to ${imagefile}"
fi
